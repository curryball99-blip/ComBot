{"ast":null,"code":"import { isPlainObject } from './isPlainObject.mjs';\nimport { getSymbols } from '../compat/_internal/getSymbols.mjs';\nimport { getTag } from '../compat/_internal/getTag.mjs';\nimport { functionTag, regexpTag, symbolTag, dateTag, booleanTag, numberTag, stringTag, objectTag, errorTag, dataViewTag, arrayBufferTag, float64ArrayTag, float32ArrayTag, bigInt64ArrayTag, int32ArrayTag, int16ArrayTag, int8ArrayTag, bigUint64ArrayTag, uint32ArrayTag, uint16ArrayTag, uint8ClampedArrayTag, uint8ArrayTag, arrayTag, setTag, mapTag, argumentsTag } from '../compat/_internal/tags.mjs';\nimport { eq } from '../compat/util/eq.mjs';\nfunction isEqualWith(a, b, areValuesEqual) {\n  return isEqualWithImpl(a, b, undefined, undefined, undefined, undefined, areValuesEqual);\n}\nfunction isEqualWithImpl(a, b, property, aParent, bParent, stack, areValuesEqual) {\n  const result = areValuesEqual(a, b, property, aParent, bParent, stack);\n  if (result !== undefined) {\n    return result;\n  }\n  if (typeof a === typeof b) {\n    switch (typeof a) {\n      case 'bigint':\n      case 'string':\n      case 'boolean':\n      case 'symbol':\n      case 'undefined':\n        {\n          return a === b;\n        }\n      case 'number':\n        {\n          return a === b || Object.is(a, b);\n        }\n      case 'function':\n        {\n          return a === b;\n        }\n      case 'object':\n        {\n          return areObjectsEqual(a, b, stack, areValuesEqual);\n        }\n    }\n  }\n  return areObjectsEqual(a, b, stack, areValuesEqual);\n}\nfunction areObjectsEqual(a, b, stack, areValuesEqual) {\n  if (Object.is(a, b)) {\n    return true;\n  }\n  let aTag = getTag(a);\n  let bTag = getTag(b);\n  if (aTag === argumentsTag) {\n    aTag = objectTag;\n  }\n  if (bTag === argumentsTag) {\n    bTag = objectTag;\n  }\n  if (aTag !== bTag) {\n    return false;\n  }\n  switch (aTag) {\n    case stringTag:\n      return a.toString() === b.toString();\n    case numberTag:\n      {\n        const x = a.valueOf();\n        const y = b.valueOf();\n        return eq(x, y);\n      }\n    case booleanTag:\n    case dateTag:\n    case symbolTag:\n      return Object.is(a.valueOf(), b.valueOf());\n    case regexpTag:\n      {\n        return a.source === b.source && a.flags === b.flags;\n      }\n    case functionTag:\n      {\n        return a === b;\n      }\n  }\n  stack = stack ?? new Map();\n  const aStack = stack.get(a);\n  const bStack = stack.get(b);\n  if (aStack != null && bStack != null) {\n    return aStack === b;\n  }\n  stack.set(a, b);\n  stack.set(b, a);\n  try {\n    switch (aTag) {\n      case mapTag:\n        {\n          if (a.size !== b.size) {\n            return false;\n          }\n          for (const [key, value] of a.entries()) {\n            if (!b.has(key) || !isEqualWithImpl(value, b.get(key), key, a, b, stack, areValuesEqual)) {\n              return false;\n            }\n          }\n          return true;\n        }\n      case setTag:\n        {\n          if (a.size !== b.size) {\n            return false;\n          }\n          const aValues = Array.from(a.values());\n          const bValues = Array.from(b.values());\n          for (let i = 0; i < aValues.length; i++) {\n            const aValue = aValues[i];\n            const index = bValues.findIndex(bValue => {\n              return isEqualWithImpl(aValue, bValue, undefined, a, b, stack, areValuesEqual);\n            });\n            if (index === -1) {\n              return false;\n            }\n            bValues.splice(index, 1);\n          }\n          return true;\n        }\n      case arrayTag:\n      case uint8ArrayTag:\n      case uint8ClampedArrayTag:\n      case uint16ArrayTag:\n      case uint32ArrayTag:\n      case bigUint64ArrayTag:\n      case int8ArrayTag:\n      case int16ArrayTag:\n      case int32ArrayTag:\n      case bigInt64ArrayTag:\n      case float32ArrayTag:\n      case float64ArrayTag:\n        {\n          if (typeof Buffer !== 'undefined' && Buffer.isBuffer(a) !== Buffer.isBuffer(b)) {\n            return false;\n          }\n          if (a.length !== b.length) {\n            return false;\n          }\n          for (let i = 0; i < a.length; i++) {\n            if (!isEqualWithImpl(a[i], b[i], i, a, b, stack, areValuesEqual)) {\n              return false;\n            }\n          }\n          return true;\n        }\n      case arrayBufferTag:\n        {\n          if (a.byteLength !== b.byteLength) {\n            return false;\n          }\n          return areObjectsEqual(new Uint8Array(a), new Uint8Array(b), stack, areValuesEqual);\n        }\n      case dataViewTag:\n        {\n          if (a.byteLength !== b.byteLength || a.byteOffset !== b.byteOffset) {\n            return false;\n          }\n          return areObjectsEqual(new Uint8Array(a), new Uint8Array(b), stack, areValuesEqual);\n        }\n      case errorTag:\n        {\n          return a.name === b.name && a.message === b.message;\n        }\n      case objectTag:\n        {\n          const areEqualInstances = areObjectsEqual(a.constructor, b.constructor, stack, areValuesEqual) || isPlainObject(a) && isPlainObject(b);\n          if (!areEqualInstances) {\n            return false;\n          }\n          const aKeys = [...Object.keys(a), ...getSymbols(a)];\n          const bKeys = [...Object.keys(b), ...getSymbols(b)];\n          if (aKeys.length !== bKeys.length) {\n            return false;\n          }\n          for (let i = 0; i < aKeys.length; i++) {\n            const propKey = aKeys[i];\n            const aProp = a[propKey];\n            if (!Object.hasOwn(b, propKey)) {\n              return false;\n            }\n            const bProp = b[propKey];\n            if (!isEqualWithImpl(aProp, bProp, propKey, a, b, stack, areValuesEqual)) {\n              return false;\n            }\n          }\n          return true;\n        }\n      default:\n        {\n          return false;\n        }\n    }\n  } finally {\n    stack.delete(a);\n    stack.delete(b);\n  }\n}\nexport { isEqualWith };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}