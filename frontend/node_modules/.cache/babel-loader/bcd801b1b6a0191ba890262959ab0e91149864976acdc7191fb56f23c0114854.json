{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{motion}from'framer-motion';import{Send,Loader2,AlertCircle}from'lucide-react';import MessageBubble from'./MessageBubble';import TypingIndicator from'./TypingIndicator';import FileUpload from'./FileUpload';import useChatStore from'../../stores/chatStore';import ComvivaLogo from'../ComvivaLogo';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatInterface=()=>{const messagesEndRef=useRef(null);const inputRef=useRef(null);const[inputValue,setInputValue]=React.useState('');const{messages,isLoading,isTyping,error,currentSessionId,sendMessage,clearError}=useChatStore();// Auto-scroll to bottom when new messages arrive\nuseEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages,isTyping]);// Focus input on mount\nuseEffect(()=>{var _inputRef$current;(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();},[]);const handleSubmit=async e=>{e.preventDefault();if(!inputValue.trim()||isLoading)return;const messageText=inputValue.trim();setInputValue('');await sendMessage(messageText,true);// Enable streaming\n};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit(e);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full bg-gray-50 dark:bg-dark-bg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(ComvivaLogo,{variant:\"orb\",className:\"w-8 h-8\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-gray-900 dark:text-dark-text\",children:\"Comviva UNO AI Assistant\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-dark-muted\",children:currentSessionId?'Conversation active':'Start a new conversation'})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto px-6 py-6 scrollbar-thin\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:[messages.length===0&&!isLoading&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"text-center py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-4 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 rounded-full flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(ComvivaLogo,{variant:\"orb\",className:\"w-20 h-20\"})}),/*#__PURE__*/_jsx(ComvivaLogo,{variant:\"full\",className:\"h-8 w-auto\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-dark-text mb-2\",children:\"Welcome to Comviva UNO AI Assistant\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-dark-muted max-w-md mx-auto\",children:\"I'm your specialized assistant for UNO Messaging Solutions and UNO Messaging Firewall. I can help with technical guidance, security best practices, integration support, and product information. How can I assist you today?\"})]}),error&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},className:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700 mt-1\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:clearError,className:\"text-sm text-red-600 hover:text-red-500 mt-2 underline\",children:\"Dismiss\"})]})]})}),messages.map((message,index)=>/*#__PURE__*/_jsx(MessageBubble,{message:message,isLast:index===messages.length-1},message.id)),isTyping&&/*#__PURE__*/_jsx(TypingIndicator,{}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 dark:bg-dark-bg px-2 py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end space-x-2\",children:[/*#__PURE__*/_jsx(FileUpload,{sessionId:currentSessionId||'default',onDocumentUploaded:doc=>{console.log('Document uploaded for session:',currentSessionId||'default',doc);}}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{ref:inputRef,value:inputValue,onChange:e=>setInputValue(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Type your message here... (Press Enter to send, Shift+Enter for new line)\",className:\"w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-colors text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\",rows:inputValue.split('\\n').length||1,maxLength:2000,disabled:isLoading})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!inputValue.trim()||isLoading,className:\"bg-blue-600 hover:bg-blue-700 active:bg-blue-800 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-xl p-2 transition-colors duration-200 flex-shrink-0 self-center\",children:isLoading?/*#__PURE__*/_jsx(Loader2,{className:\"w-5 h-5 animate-spin\"}):/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\",strokeWidth:2.5})})]}),inputValue.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-dark-muted mt-2 text-right\",children:[inputValue.length,\"/2000\"]})]})})})]});};export default ChatInterface;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}