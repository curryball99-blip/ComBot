{"ast":null,"code":"import { AbortError } from '../error/AbortError.mjs';\nfunction delay(ms, {\n  signal\n} = {}) {\n  return new Promise((resolve, reject) => {\n    const abortError = () => {\n      reject(new AbortError());\n    };\n    const abortHandler = () => {\n      clearTimeout(timeoutId);\n      abortError();\n    };\n    if (signal?.aborted) {\n      return abortError();\n    }\n    const timeoutId = setTimeout(() => {\n      signal?.removeEventListener('abort', abortHandler);\n      resolve();\n    }, ms);\n    signal?.addEventListener('abort', abortHandler, {\n      once: true\n    });\n  });\n}\nexport { delay };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}