{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/Ravi/ComBot/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Search,Plus,ExternalLink,BarChart3,Filter,Calendar,User,AlertCircle,AlertTriangle,Brain,Clock,TrendingUp,Loader2,Users,Target,CheckCircle,Play,XCircle,Pause,Zap}from'lucide-react';// Determine API base (explicit env > same-origin fallback)\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE=(process.env.REACT_APP_API_URL||'').replace(/\\/$/,'')||\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":8000\");const JiraPageWithSidebar=()=>{var _dashboardData$summar,_dashboardData$summar2,_dashboardData$summar3,_dashboardData$summar4,_dashboardData$summar5,_dashboardData$summar6,_teamAnalytics$summar,_teamAnalytics$indivi,_teamAnalytics$produc;const[activeTab,setActiveTab]=useState('dashboard');const[dashboardData,setDashboardData]=useState(null);const[teamAnalytics,setTeamAnalytics]=useState(null);const[tickets,setTickets]=useState([]);const[loading,setLoading]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[customJql,setCustomJql]=useState('');const[aiAnalysis,setAiAnalysis]=useState(null);const[analyzingTicket,setAnalyzingTicket]=useState(null);const[dateRange,setDateRange]=useState('7d');const[filters,setFilters]=useState({assignee:'',status:'',priority:''});const[filterOptions,setFilterOptions]=useState({assignees:[],statuses:[],priorities:[]});const[teamFilters,setTeamFilters]=useState({assignees:[],dateRange:'30d'});const[showAssigneeDropdown,setShowAssigneeDropdown]=useState(false);const[selectedMember,setSelectedMember]=useState(null);const[individualAnalysis,setIndividualAnalysis]=useState(null);const[currentPage,setCurrentPage]=useState(1);const[pagination,setPagination]=useState({});// New sidebar and JQL states\nconst[globalJql,setGlobalJql]=useState('');const[sidebarCollapsed,setSidebarCollapsed]=useState(false);useEffect(()=>{if(activeTab==='dashboard'){loadDashboard();loadFilterOptions();}else if(activeTab==='team-analytics'){loadTeamAnalytics();}},[activeTab,dateRange,teamFilters,globalJql]);const loadDashboard=async()=>{setLoading(true);try{const response=await fetch(\"\".concat(API_BASE,\"/api/jira/live/summary?range=\").concat(encodeURIComponent(dateRange)));if(response.ok){const live=await response.json();const transformed={summary:{total_tickets:live.total,active_tickets:live.active,resolved_tickets:live.resolved,active_percentage:live.active_pct,resolved_percentage:live.resolved_pct,recent_updates:0},status_distribution:live.status_distribution||{},priority_distribution:live.priority_distribution||{},assignee_distribution:Object.fromEntries((live.assignee_top||[]).map(_ref=>{let[n,c]=_ref;return[n,c];})),recent_tickets:[]};setDashboardData(transformed);}else{console.error('Live summary HTTP error',response.status);}}catch(e){console.error('Failed to load live summary (sidebar variant):',e);}finally{setLoading(false);}};const loadFilterOptions=async()=>{try{const response=await fetch(\"\".concat(API_BASE,\"/api/jira/filters\"));const data=await response.json();if(response.ok){setFilterOptions(data);}}catch(error){console.error('Failed to load filter options:',error);}};const loadTeamAnalytics=async()=>{setLoading(true);try{const params=new URLSearchParams();params.append('date_range',teamFilters.dateRange);if(globalJql.trim())params.append('jql',globalJql.trim());const response=await fetch(\"\".concat(API_BASE,\"/api/jira/team-analytics?\").concat(params));const data=await response.json();if(response.ok){setTeamAnalytics(data);}}catch(error){console.error('Failed to load team analytics:',error);}finally{setLoading(false);}};const searchTickets=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;setLoading(true);try{const params=new URLSearchParams({page:page.toString(),limit:'20'});if(globalJql.trim()){params.append('custom_jql',globalJql.trim());}else if(customJql.trim()){params.append('custom_jql',customJql.trim());}else if(searchQuery.trim()){params.append('query',searchQuery.trim());}if(filters.assignee)params.append('assignee',filters.assignee);if(filters.status)params.append('status',filters.status);if(filters.priority)params.append('priority',filters.priority);const response=await fetch(\"\".concat(API_BASE,\"/api/jira/search?\").concat(params));const data=await response.json();if(response.ok){setTickets(data.tickets||[]);setPagination(data.pagination||{});setCurrentPage(page);}else{console.error('Search failed:',data.detail);setTickets([]);}}catch(error){console.error('Search error:',error);setTickets([]);}finally{setLoading(false);}};const analyzeTicket=async ticketKey=>{setAnalyzingTicket(ticketKey);try{const response=await fetch('/api/jira/analyze',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ticket_key:ticketKey})});if(response.ok){const result=await response.json();setAiAnalysis(result);}}catch(error){console.error('Analysis failed:',error);}finally{setAnalyzingTicket(null);}};const loadIndividualAnalysis=async assignee=>{try{const response=await fetch(\"/api/jira/individual-analysis/\".concat(encodeURIComponent(assignee),\"?date_range=\").concat(teamFilters.dateRange));const data=await response.json();if(response.ok){setIndividualAnalysis(data);setSelectedMember(assignee);}}catch(error){console.error('Failed to load individual analysis:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"transition-all duration-300 \".concat(sidebarCollapsed?'w-0':'w-80',\" overflow-hidden bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 dark:text-white\",children:\"JIRA Filters\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarCollapsed(true),className:\"p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Global JQL Query\"}),/*#__PURE__*/_jsx(\"textarea\",{value:globalJql,onChange:e=>setGlobalJql(e.target.value),placeholder:\"e.g., project = \\\"MBSL3\\\" AND status != \\\"Done\\\"\",className:\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg text-sm font-mono resize-none\",rows:3}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:\"This query will filter all dashboard and analytics data\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Quick Filters\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGlobalJql('project = \"MBSL3\" AND status != \"Done\"'),className:\"w-full text-left px-3 py-2 text-sm bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-100 dark:hover:bg-blue-900/30\",children:\"Active MBSL3 Tickets\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGlobalJql('project = \"MBSL3\" AND updated >= -7d'),className:\"w-full text-left px-3 py-2 text-sm bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded hover:bg-green-100 dark:hover:bg-green-900/30\",children:\"Recent Updates\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGlobalJql('project = \"MBSL3\" AND priority = \"High\"'),className:\"w-full text-left px-3 py-2 text-sm bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded hover:bg-red-100 dark:hover:bg-red-900/30\",children:\"High Priority\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGlobalJql(''),className:\"w-full text-left px-3 py-2 text-sm bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-100 dark:hover:bg-gray-600\",children:\"Clear Filter\"})]})]})})]})}),sidebarCollapsed&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarCollapsed(false),className:\"fixed left-2 top-1/2 transform -translate-y-1/2 z-50 p-2 bg-blue-600 text-white rounded-r-lg shadow-lg hover:bg-blue-700\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5l7 7-7 7\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('dashboard'),className:\"px-3 py-2 rounded-md text-sm font-medium transition-colors \".concat(activeTab==='dashboard'?'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm':'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'),children:[/*#__PURE__*/_jsx(BarChart3,{size:14,className:\"inline mr-1\"}),\"Dashboard\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('search'),className:\"px-3 py-2 rounded-md text-sm font-medium transition-colors \".concat(activeTab==='search'?'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm':'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'),children:[/*#__PURE__*/_jsx(Search,{size:14,className:\"inline mr-1\"}),\"Search\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('team-analytics'),className:\"px-3 py-2 rounded-md text-sm font-medium transition-colors \".concat(activeTab==='team-analytics'?'bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm':'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'),children:[/*#__PURE__*/_jsx(Users,{size:14,className:\"inline mr-1\"}),\"Analytics\"]})]})})})}),aiAnalysis&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\",children:[/*#__PURE__*/_jsx(Brain,{className:\"w-5 h-5 mr-2 text-purple-600\"}),\"AI Analysis: \",aiAnalysis.ticket_key]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAiAnalysis(null),className:\"p-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 rounded-lg\",children:/*#__PURE__*/_jsx(XCircle,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"prose dark:prose-invert max-w-none\",children:/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap text-sm leading-relaxed text-gray-700 dark:text-gray-300\",children:aiAnalysis.analysis})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",onClick:()=>setShowAssigneeDropdown(false),children:[activeTab==='dashboard'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium dark:text-white\",children:\"MBSL3 Project Overview\"}),/*#__PURE__*/_jsxs(\"select\",{value:dateRange,onChange:e=>setDateRange(e.target.value),className:\"px-3 py-1 border dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"7d\",children:\"Last 7 days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"30d\",children:\"Last 30 days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"90d\",children:\"Last 90 days\"})]})]})}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-8 h-8 animate-spin mx-auto text-blue-600\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400\",children:\"Loading dashboard...\"})]}):dashboardData!==null&&dashboardData!==void 0&&dashboardData.error?/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-700 dark:text-red-400\",children:dashboardData.error})]})}):dashboardData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-5 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-blue-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600 dark:text-blue-400\",children:((_dashboardData$summar=dashboardData.summary)===null||_dashboardData$summar===void 0?void 0:_dashboardData$summar.total_tickets)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Total Tickets\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600 dark:text-green-400\",children:((_dashboardData$summar2=dashboardData.summary)===null||_dashboardData$summar2===void 0?void 0:_dashboardData$summar2.active_tickets)||0}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"Active (\",((_dashboardData$summar3=dashboardData.summary)===null||_dashboardData$summar3===void 0?void 0:_dashboardData$summar3.active_percentage)||0,\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-600 dark:text-gray-400\",children:((_dashboardData$summar4=dashboardData.summary)===null||_dashboardData$summar4===void 0?void 0:_dashboardData$summar4.resolved_tickets)||0}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"Resolved (\",((_dashboardData$summar5=dashboardData.summary)===null||_dashboardData$summar5===void 0?void 0:_dashboardData$summar5.resolved_percentage)||0,\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-purple-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-purple-600 dark:text-purple-400\",children:((_dashboardData$summar6=dashboardData.summary)===null||_dashboardData$summar6===void 0?void 0:_dashboardData$summar6.recent_updates)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Recent Updates\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-orange-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-orange-600 dark:text-orange-400\",children:Object.keys(dashboardData.assignee_distribution||{}).length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Active Assignees\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium mb-3 dark:text-white\",children:\"By Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:Object.entries(dashboardData.status_distribution||{}).slice(0,5).map(_ref2=>{let[status,count]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400 truncate\",children:status}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium dark:text-white\",children:count})]},status);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium mb-3 dark:text-white\",children:\"By Priority\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:Object.entries(dashboardData.priority_distribution||{}).slice(0,5).map(_ref3=>{let[priority,count]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400 truncate\",children:priority}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium dark:text-white\",children:count})]},priority);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium mb-3 dark:text-white\",children:\"By Type\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:Object.entries(dashboardData.type_distribution||{}).slice(0,5).map(_ref4=>{let[type,count]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400 truncate\",children:type}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium dark:text-white\",children:count})]},type);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium mb-3 dark:text-white\",children:\"Top Assignees\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:Object.entries(dashboardData.assignee_distribution||{}).slice(0,5).map(_ref5=>{let[assignee,count]=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-400 truncate\",children:assignee}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium dark:text-white\",children:count})]},assignee);})})]})]}),dashboardData.recent_tickets&&dashboardData.recent_tickets.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4 dark:text-white\",children:\"Recent Activity\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-96 overflow-y-auto\",children:dashboardData.recent_tickets.slice(0,15).map(ticket=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600 dark:text-blue-400\",children:ticket.key}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[\"\\u2022 \",ticket.assignee]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full \".concat(ticket.status==='Done'?'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200':ticket.status==='In Progress'?'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200':'bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200'),children:ticket.status})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300 truncate\",children:ticket.summary})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[!['Done','Closed','Rejected','Resolved'].includes(ticket.status)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>analyzeTicket(ticket.key),disabled:analyzingTicket===ticket.key,className:\"p-2 text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 disabled:opacity-50 rounded\",title:\"AI Analysis\",children:analyzingTicket===ticket.key?/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Brain,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"a\",{href:ticket.url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"p-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 rounded\",children:/*#__PURE__*/_jsx(ExternalLink,{className:\"w-4 h-4\"})})]})]},ticket.key))})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 text-gray-500 dark:text-gray-400\",children:\"No dashboard data available\"})]}),activeTab==='search'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search tickets (key, project, or summary)...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),onKeyPress:e=>e.key==='Enter'&&searchTickets(),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>searchTickets(),disabled:loading,className:\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\",children:[loading?/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4\"}),\"Search\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Custom JQL Query (e.g., project = MBSL3 AND status = Open)...\",value:customJql,onChange:e=>setCustomJql(e.target.value),onKeyPress:e=>e.key==='Enter'&&searchTickets(),className:\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:filters.assignee,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{assignee:e.target.value})),className:\"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Assignees\"}),filterOptions.assignees.map(assignee=>/*#__PURE__*/_jsx(\"option\",{value:assignee,children:assignee},assignee))]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.status,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{status:e.target.value})),className:\"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),filterOptions.statuses.map(status=>/*#__PURE__*/_jsx(\"option\",{value:status,children:status},status))]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.priority,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{priority:e.target.value})),className:\"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Priorities\"}),filterOptions.priorities.map(priority=>/*#__PURE__*/_jsx(\"option\",{value:priority,children:priority},priority))]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-8 h-8 animate-spin mx-auto text-blue-600\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400\",children:\"Searching...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[tickets.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold dark:text-white\",children:[\"Search Results (\",pagination.total||tickets.length,\")\"]}),pagination.has_more&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>searchTickets(currentPage-1),disabled:currentPage===1,className:\"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50 hover:bg-blue-700\",children:\"\\u2190\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"Page \",currentPage]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>searchTickets(currentPage+1),disabled:!pagination.has_more,className:\"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50 hover:bg-blue-700\",children:\"\\u2192\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:tickets.map(ticket=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600 dark:text-blue-400\",children:ticket.key}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[\"\\u2022 \",ticket.assignee]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full \".concat(ticket.status==='Done'?'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200':ticket.status==='In Progress'?'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200':'bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200'),children:ticket.status}),ticket.priority&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:ticket.priority})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300 truncate\",children:ticket.summary})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[!['Done','Closed','Rejected','Resolved'].includes(ticket.status)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>analyzeTicket(ticket.key),disabled:analyzingTicket===ticket.key,className:\"p-2 text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 disabled:opacity-50 rounded\",title:\"AI Analysis\",children:analyzingTicket===ticket.key?/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Brain,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"a\",{href:ticket.url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"p-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 rounded\",children:/*#__PURE__*/_jsx(ExternalLink,{className:\"w-4 h-4\"})})]})]},ticket.key))}),tickets.length===0&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 dark:text-gray-400\",children:\"No tickets found. Try adjusting your search criteria.\"})]})})]}),activeTab==='team-analytics'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium dark:text-white flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5 mr-2 text-purple-600\"}),\"Team Productivity Analytics\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();setShowAssigneeDropdown(!showAssigneeDropdown);},className:\"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg text-sm min-w-48 text-left flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:teamFilters.assignees.length===0?'All Team Members':teamFilters.assignees.length===1?teamFilters.assignees[0]:\"\".concat(teamFilters.assignees.length,\" members selected\")}),/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})})]}),showAssigneeDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:teamFilters.assignees.length===0,onChange:()=>setTeamFilters(_objectSpread(_objectSpread({},teamFilters),{},{assignees:[]})),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm dark:text-white\",children:\"All Team Members\"})]}),filterOptions.assignees.map(assignee=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:teamFilters.assignees.includes(assignee),onChange:e=>{if(e.target.checked){setTeamFilters(_objectSpread(_objectSpread({},teamFilters),{},{assignees:[...teamFilters.assignees,assignee]}));}else{setTeamFilters(_objectSpread(_objectSpread({},teamFilters),{},{assignees:teamFilters.assignees.filter(a=>a!==assignee)}));}},className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm dark:text-white\",children:assignee})]},assignee))]})})]}),/*#__PURE__*/_jsxs(\"select\",{value:teamFilters.dateRange,onChange:e=>setTeamFilters(_objectSpread(_objectSpread({},teamFilters),{},{dateRange:e.target.value})),className:\"px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"7d\",children:\"Last 7 days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"30d\",children:\"Last 30 days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"90d\",children:\"Last 90 days\"})]})]})]})}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-8 h-8 animate-spin mx-auto text-blue-600\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400\",children:\"Loading team analytics...\"})]}):teamAnalytics&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:(_teamAnalytics$summar=teamAnalytics.summary_cards)===null||_teamAnalytics$summar===void 0?void 0:_teamAnalytics$summar.map((card,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-\".concat(card.color,\"-500\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:card.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-\".concat(card.color,\"-600 dark:text-\").concat(card.color,\"-400\"),children:card.value}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:card.subtitle})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-\".concat(card.color,\"-100 dark:bg-\").concat(card.color,\"-900/20 rounded-full\"),children:[card.title==='Team Members'&&/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5 text-\".concat(card.color,\"-600\")}),card.title==='Total Tickets'&&/*#__PURE__*/_jsx(Target,{className:\"w-5 h-5 text-\".concat(card.color,\"-600\")}),card.title==='Avg Completion'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-\".concat(card.color,\"-600\")}),card.title==='Avg Resolution'&&/*#__PURE__*/_jsx(Clock,{className:\"w-5 h-5 text-\".concat(card.color,\"-600\")})]})]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 dark:text-white flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"w-5 h-5 mr-2 text-blue-600\"}),\"Individual Performance\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto pr-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:(_teamAnalytics$indivi=teamAnalytics.individual_performance)===null||_teamAnalytics$indivi===void 0?void 0:_teamAnalytics$indivi.filter(person=>teamFilters.assignees.length===0||teamFilters.assignees.includes(person.assignee)).map((person,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>loadIndividualAnalysis(person.assignee),className:\"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 dark:text-white truncate text-sm\",children:person.assignee}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(person.productivity_score>=80?'text-green-600 bg-green-100 dark:bg-green-900/20':person.productivity_score>=60?'text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20':'text-red-600 bg-red-100 dark:bg-red-900/20'),children:person.productivity_score})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-2 text-xs mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-1\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3 text-green-500 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:person.metrics.done})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"Done\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-1\",children:[/*#__PURE__*/_jsx(Play,{className:\"w-3 h-3 text-blue-500 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:person.metrics.in_progress})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"Progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-1\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3 h-3 text-gray-500 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:person.metrics.todo})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"To Do\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 dark:text-gray-400\",children:[\"Completion: \",person.completion_rate,\"%\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[person.performance_trend==='improving'&&/*#__PURE__*/_jsx(TrendingUp,{className:\"w-3 h-3 text-green-500\"}),person.performance_trend==='declining'&&/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-3 h-3 text-red-500\"}),person.performance_trend==='stable'&&/*#__PURE__*/_jsx(BarChart3,{className:\"w-3 h-3 text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-gray-500 dark:text-gray-400 capitalize\",children:person.performance_trend})]})]})]},index))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-4 dark:text-white flex items-center\",children:[/*#__PURE__*/_jsx(Brain,{className:\"w-5 h-5 mr-2 text-purple-600\"}),\"AI Productivity Insights\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-64 overflow-y-auto\",children:(_teamAnalytics$produc=teamAnalytics.productivity_insights)===null||_teamAnalytics$produc===void 0?void 0:_teamAnalytics$produc.filter(insight=>teamFilters.assignees.length===0||teamFilters.assignees.includes(insight.assignee)).map((insight,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-l-4 border-purple-500 pl-4 py-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-sm text-gray-900 dark:text-white mb-2\",children:insight.assignee}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:insight.insights.map((item,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded text-xs \".concat(item.type==='positive'?'bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300':item.type==='concern'?'bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300':item.type==='warning'?'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300':'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300'),children:item.message},idx))})]},index))})]})]})]})]})]})]});};export default JiraPageWithSidebar;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}